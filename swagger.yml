openapi: "3.0.2"
info:
  title: Dreamkast API
  version: "1.0"
  description: "This is a API definition of the Dreamakst. You can find a documentation of this API at http://api-docs.dev.cloudnativedays.jp/."
  license:
    name: "Apache 2.0"
    url: "http://www.apache.org/licenses/LICENSE-2.0.html"
servers:
  - url: http://localhost:8080
paths:
  /{eventId}:
    get:
      parameters:
        - name: eventId
          in: path
          description: ID of event
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '400':
          description: Invalid eventId supplied
        '404':
          description: Event not found
  /{eventId}/tracks:
    get:
      parameters:
        - name: eventId
          in: path
          description: ID of event
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Track'
        '400':
          description: Invalid eventId supplied
        '404':
          description: Event not found
  
  /{eventId}/tracks/{trackId}:
    get:
      parameters:
        - name: eventId
          in: path
          description: ID of event
          required: true
          schema:
            type: string
        - name: trackId
          in: path
          description: ID of track
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Track'
        '400':
          description: Invalid params supplied
        '404':
          description: Track not found
  /{eventId}/talks:
    get:
      parameters:
        - name: eventId
          in: path
          description: ID of event
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Talk'
        '400':
          description: Invalid eventId supplied
        '404':
          description: Event not found
  /{eventId}/talks/{talkId}:
    get:
      parameters:
        - name: eventId
          in: path
          description: ID of event
          required: true
          schema:
            type: string
        - name: talkId
          in: path
          description: ID of talk
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Talk'
        '400':
          description: Invalid params supplied
        '404':
          description: Talk not found

components:
  schemas:
    Event:
      type: object
      additionalProperties: false
      properties:
        id:
          type: number
        name:
          type: string
        abbr:
          type: string
        status:
          type: string
        theme:
          type: string
        about:
          type: string
        privacy_policy:
          type: string
        privacy_policy_for_speaker:
          type: string
        copyright:
          type: string
        coc:
          type: string
      required:
        - id
        - name
        - abbr
        - status
        - theme
        - about
        - privacy_policy
        - privacy_policy_for_speaker
        - copyright
        - coc
    Track:
      type: object
      additionalProperties: false
      properties:
        id:
          type: number
        name:
          type: string
        vimeoId: # TBD
          type: string
        talks:
          type: Talk
      required:
        - id
        - name
    Talk:
      type: object
      additionalProperties: false
      properties:
        id:
          type: number
        trackId:
          type: string
        vimeoId: # TBD
          type: string
        title:
          type: string
        abstract:
          type: string
        speakers:
          type: array
        dayId:  # TBD
          type: number
        showOnTimetable:
          type: boolean
        startTime: # TBD(Timezone)
          type: string
        endTime: # TBD(Timezone)
          type: string
        talkTimeId: # TBD
          type: number
        talkDifficultyId:
          type: number
        talkCategoryId:
          type: number
        videoPublished: # TBD
          type: boolean
        onAir:
          type: boolean
        documentUrl:
          type: string
      required:
        - id
        - trackId
        - vimeoId
        - title
        - abstract
        - speakers
        - dayId
        - showOnTimetable
        - startTime
        - endTime
        - talkTimeId
        - talkDifficultyId
        - talkCategoryId
        - videoPublished
